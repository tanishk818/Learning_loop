<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
        <link rel="stylesheet" media="screen and (min-width: 900px)" href="arrow.css">
        <link rel="stylesheet" media="screen and (max-width: 900px)" href="small_arrow.css">
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
        
        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
        <style>
            @import url('https://fonts.googleapis.com/css?family=Special+Elite');

            
.quote {
	font-family: 'Special Elite', cursive;
	background: #fffdf5;
	color: #3f3f5a;
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
}
.btn-primary{
    float: left;
}
.btn-success{
    float:right;
}
.btn-danger{
    float:right;
}
blockquote {
	font-weight: 100;
	font-size: 2rem;
	max-width: 600px;
	line-height: 1.4;
	position: relative;
	margin: 0;
	padding: .5rem;
}

blockquote:before,
blockquote:after {
	position: absolute;
	color: #f1efe6;
	font-size: 8rem;
	width: 4rem;
	height: 4rem;
}

blockquote:before {
	content: '“';
	left: -5rem;
	top: -2rem;
}

blockquote:after {
	content: '”';
	right: -5rem;
	bottom: 1rem;
}

cite {
	line-height: 3;
	text-align: left;
}
        </style>
</head>
<body>
   <!-- win_modal -->
        <div id="winModal" class="modal fade" role="dialog">
            <div class="modal-dialog " role="content">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-lg-12 col-sm-12 col-xs-12">
                                <img src="win.jpeg" class="img-fluid" >
                            </div>
                        </div>
                        <div class="quote">
                            <blockquote>Winning solves everything.</blockquote>
                            
                        </div>
                        <a class="btn btn-primary" href="index.html" role="button">Home</a>
                       <a class="btn btn-success" href="lev4.html" role="button">Next Level</a>
                        
                    </div>
                </div>
            </div>
        </div>
        <div id="lossModal" class="modal fade" role="dialog">
            <div class="modal-dialog " role="content">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-lg-12 col-sm-12 col-xs-12">
                                <img src="loss.jpeg" class="img-fluid" >
                            </div>
                        </div>
                        <div class="quote">
                            <blockquote>Winning provides happiness.Loosing provides wisdom</blockquote>
                            
                        </div>
                        <a class="btn btn-primary" href="index.html" role="button">Home</a>
                       <a class="btn btn-danger" href="lev3.html" role="button">Try Again</a>
                        
                    </div>
                </div>
            </div>
        </div>
<!--radius=40 distance between two circle=30 -->

        <!--radius=40 distance between two circle=30 -->
        
            <div class="screen monitor">
                
                <svg height="600" width="320" xmlns="http://www.w3.org/2000/svg">
                <filter id="inset-shadow" x="-50%" y="-50%" width="200%" height="200%">
                    <feComponentTransfer in=SourceAlpha>
                        <feFuncA type="table" tableValues="1 0" />
                    </feComponentTransfer>
                    <feGaussianBlur stdDeviation="4"/>
                    <feOffset dx="0" dy="5" result="offsetblur"/>
                    <feFlood flood-color="rgb(0, 0, 0)" result="color"/>
                    <feComposite in2="offsetblur" operator="in"/>
                    <feComposite in2="SourceAlpha" operator="in" />
                    <feMerge>
                        <feMergeNode in="SourceGraphic" />
                        <feMergeNode />
                    </feMerge>
                </filter>
               
                <circle  cx="50" cy="50" r="40" stroke="black" stroke-width="3" fill="#F76C6C"   filter="url(#inset-shadow)" />
                <circle cx="160" cy="50" r="40" stroke="black" stroke-width="3" fill="#F76C6C"  filter="url(#inset-shadow)" />
                <circle cx="270" cy="50" r="40" stroke="black" stroke-width="3" fill="#FDD20E"  filter="url(#inset-shadow)" />
                 
                <circle  cx="50" cy="160" r="40" stroke="black" stroke-width="3" fill="#FDD20E"   filter="url(#inset-shadow)" />
                <circle cx="160" cy="160" r="40" stroke="black" stroke-width="3" fill="#F76C6C"  filter="url(#inset-shadow)" />
                <circle cx="270" cy="160" r="40" stroke="black" stroke-width="3" fill="#F76C6C"  filter="url(#inset-shadow)" />
                <circle  cx="50" cy="270" r="40" stroke="black" stroke-width="3" fill="#FDD20E"   filter="url(#inset-shadow)" />
                <circle cx="160" cy="270" r="40" stroke="black" stroke-width="3" fill="#F76C6C"  filter="url(#inset-shadow)" />
                <circle cx="270" cy="270" r="40" stroke="black" stroke-width="3" fill="#F76C6C"  filter="url(#inset-shadow)" />
                <circle  cx="50" cy="380" r="40" stroke="black" stroke-width="3" fill="#F76C6C"   filter="url(#inset-shadow)" />
                <circle cx="160" cy="380" r="40" stroke="black" stroke-width="3" fill="#F76C6C"  filter="url(#inset-shadow)" />
                <circle cx="270" cy="380" r="40" stroke="black" stroke-width="3" fill="#FDD20E"  filter="url(#inset-shadow)" />
                 <circle  cx="50" cy="490" r="40" stroke="black" stroke-width="3" fill="#F76C6C"   filter="url(#inset-shadow)" />
                <circle cx="160" cy="490" r="40" stroke="black" stroke-width="3" fill="#FDD20E"  filter="url(#inset-shadow)" />
                <circle cx="270" cy="490" r="40" stroke="black" stroke-width="3" fill="#FDD20E"  filter="url(#inset-shadow)" />
                <circle  cx="50" cy="50" r="20" stroke="black" stroke-width="3" fill="white"  filter="url(#inset-shadow)"  />
                </svg>
                <div class="t">
                <p></p>
                <p></p>
                <p></p>
                <p></p>
                <p></p>
                <p></p>
                <p></p>
                <p></p>
                <p></p>
                <p></p>
                <p></p>
                <p></p>
                <p></p>
                <p></p>
                <p></p>
                <p></p>
                <p></p>
                <p></p>
               </div>
            </div>
       
        <div class="keys">
            <div class="up arr" onclick="UpMove()"><i class="fa fa-arrow-up"></i></div>
            <br />
            <div class="left arr " onclick="LeftMove()" ><i class="fa fa-arrow-left"></i></div>
            <div class="down arr" onclick="DownMove()"><i class="fa fa-arrow-down"></i></div>
            <div class="right arr" onclick="RightMove()"><i class="fa fa-arrow-right"></i></div>
        </div>

        <!--<div class="container">
        <div class="bar bar1"></div>
        <div class="ball"></div>
        <div class="bar bar2"></div>
    </div>-->

        <!-- keys end -->
 <script src="anime.min.js"></script>
 
 <script src='THREEx.KeyboardState.js'></script>
 
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
<script>
     var i=2;
var count=0;
var visibilityKey =   [{
  x: 0,
},
  {
    y: "visible"
  },
  {
    y: "hidden"
  }];

var levels = [
  {
    lev:[1,1,1],
  },
  {
    lev:[-2, -2, -2,-2, 1, 1, 2, 2, 2, 2, 1, 1]
  },
  {
    lev:[1, -2, 1, -2, -1, -2, 1, -2, -2,1]
  }
];
 print();
  var temp;
  var keyVisible = 1;
  var keyCount = 1;
  var radiusvalue = {}
    var value = {}
   // value.x = document.getElementsByTagName("circle")[3].getAttribute("cx")
    var t1 = anime.timeline({
  easing: 'easeOutElastic(1, .8)',
  autoplay: true,
  loop: true,
  duration: 4000
});
var t2 = anime.timeline({
  easing: 'easeOutElastic(1, .8)',
  autoplay: true,
  loop: true,
  duration: 4000
});
//Init();

Idle();
document.addEventListener("keydown", onDocumentKeyDown, false);
function onDocumentKeyDown(event) {
    var keyCode = event.which;
    // up
    if (keyCode == 87) {
       UpMove()
        // down
    } else if (keyCode == 83) {
       DownMove()
        // left
    } else if (keyCode == 65) {
       LeftMove();
        // right
    } else if (keyCode == 68) {
       RightMove();
        // space
    } else if (keyCode == 32) {
       
    }
    else {
      Idle();
    }
    
};

function Init(){
  t2.add({
    targets:visibilityKey,
  
      
       
      
      duration: 10000,
      easing: 'linear',
      autoplay: true,
      loop: true,
      update: function(){
        //if (keyVisible == 1 || keyVisible == 2)
       // {
          document.getElementsByClassName("right arr")[0].firstChild.style.visibility = visibilityKey[keyCount].y;
          
        //}
       
        keyVisible++;
        if (keyVisible == 0)
        {
          keyVisible = 1;
        }
        if(keyVisible == 20 && keyCount == 1)
        {
          keyVisible = 2;
          keyCount = 2;
        }
        if(keyVisible == 20 && keyCount == 2)
        {
          keyVisible = 1;
          keyCount = 1;

        }
        
        
       
      },
        complete: function() {}


    
  });
  t2.play();
}
function sound(src) {
    this.sound = document.createElement("audio");
    this.sound.src = src;
    this.sound.setAttribute("preload", "auto");
    this.sound.setAttribute("controls", "none");
    this.sound.style.display = "none";
    document.body.appendChild(this.sound);
    this.play = function(){
        this.sound.play();
    }
    this.stop = function(){
        this.sound.pause();
    }    
}
function Idle()
{
 
  radiusvalue.x = document.getElementsByTagName("circle")[15].getAttribute("r"); 
  t1.add({
    targets:radiusvalue,
   keyframes: [
      
       {x: 25},
       {x: 20}
   ],
      
       
      
      duration: 1000,
      easing: 'linear',
      autoplay: true,
      loop: true,
      update: function(){

       
        document.getElementsByTagName("circle")[15].setAttribute("r",radiusvalue.x);
        
       
      },
        complete: function() {}


    
  });
  t1.play();
  
}

function RightMove() {
 
  myMusic = new sound("Drip.wav");
  myMusic.play();
value.x =+ document.getElementsByTagName("circle")[15].getAttribute("cx"); 
  temp =+ document.getElementsByTagName("circle")[15].getAttribute("cx")+ +110; 
 check(1);
 print();
 if (temp >= 380)
 {
     temp = 50;
 }

 anime({
  targets: value,
  x: temp,
  duration: 300,
  autoplay: true,
  update: function(){
            document.getElementsByTagName("circle")[15].setAttribute("cx",value.x);
          
         
      
      },
  easing: 'easeInOutSine'
});
 

}
function LeftMove()
{
  
  temp =document.getElementsByTagName("circle")[15].getAttribute("cx");

  myMusic = new sound("Drip.wav");
  myMusic.play();

  value.x = document.getElementsByTagName("circle")[15].getAttribute("cx"); 
  temp = temp -110;
  check(-1);
  print();
  if (temp <0)
  {
    temp = 270
  }

  anime({
  targets: value,
  x: temp,
  duration: 300,
  autoplay: true,
  update: function(){
          console.log("SS" + value.x);
       
            document.getElementsByTagName("circle")[15].setAttribute("cx",value.x);
          
  
     
      },
  easing: 'easeInOutSine'
});
}

function DownMove()
{
  temp =document.getElementsByTagName("circle")[15].getAttribute("cy");

  myMusic = new sound("InvalidMove.wav");
  myMusic.play();

  value.x = document.getElementsByTagName("circle")[15].getAttribute("cy"); 
  temp =+ document.getElementsByTagName("circle")[15].getAttribute("cy")+ +110; 
  console.log(temp);
  if (temp > 490)
  {
    temp = 50;
  }
  check(-2);
  print();
 
  
  anime({
  targets: value,
  x: temp,
  duration: 300,
  autoplay: true,
  update: function(){
         
       
            document.getElementsByTagName("circle")[15].setAttribute("cy",value.x);
          
          
       
     
      },
  easing: 'easeInOutSine'
});
}

function UpMove()
{
  temp = document.getElementsByTagName("circle")[15].getAttribute("cy");

  myMusic = new sound("InvalidMove.wav");
  myMusic.play();
  
  value.x = document.getElementsByTagName("circle")[15].getAttribute("cy"); 
  temp =+ document.getElementsByTagName("circle")[15].getAttribute("cy") - 110; 
  if (temp < 50)
  {
    temp = 490;
  }
  check(2);
  print();
  
 
  anime({
  targets: value,
  x: temp,
  duration: 300,
  autoplay: true,
  update: function(){
         
       
            document.getElementsByTagName("circle")[15].setAttribute("cy",value.x);
          
         
       
     
      },
  easing: 'easeInOutSine'
});

}
function check(x){
  if(levels[i].lev[count++]===x){
    console.log("count : "+count);
  }
  else {
    count=0;
    value.x=50;
    temp=50;
    console.log("count : "+count);
    console.log("you hit the wrong key");
    document.getElementsByTagName("circle")[15].setAttribute("cx",value.x);
    document.getElementsByTagName("circle")[15].setAttribute("cy",value.x);
    $('#lossModal').modal('show');
  }
   if(count===levels[i].lev.length){
    count=0;
   console.log("you win the level");
   $('#winModal').modal('show');
    //alert("can't stop the champion!bravo! you win the level");
  }
}
function print(){
    var text=document.getElementsByTagName("p");
    console.log(levels);
    for(var j=0;j<levels[i].lev.length;j++) {
            if(levels[i].lev[j]===1)
            text[j].textContent="right()";
            else if(levels[i].lev[j]===-1)
            text[j].textContent="left()";
            else if(levels[i].lev[j]===2)
            text[j].textContent="up()";
            else 
            text[j].textContent="down()";
    }
    for(var j=0;j<count;j++){
        text[j].style.color="#39FF14";
    }
    for(var j=count;j<levels[i].lev.length;j++){
        text[j].style.color="red";
    }
}
</script>
</body>
</html>
